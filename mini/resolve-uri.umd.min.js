!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).resolveURI=e()}(this,(function(){"use strict";const t=/^[\w+.-]+:\/\//,e=/^([\w+.-]+:)\/\/([^@/#?]*@)?([^:/#?]*)(:\d+)?(\/[^#?]*)?(\?[^#]*)?(#.*)?/,s=/^file:(?:\/\/((?![a-z]:)[^/#?]*)?)?(\/?[^#?]*)(\?[^#]*)?(#.*)?/i;var n;function r(t){return t.startsWith("/")}function h(t){return/^[.?#]/.test(t)}function o(t){const s=e.exec(t);return u(s[1],s[2]||"",s[3],s[4]||"",s[5]||"/",s[6]||"",s[7]||"")}function u(t,e,s,r,h,o,u){return{scheme:t,user:e,host:s,port:r,path:h,query:o,hash:u,type:n.Absolute}}function a(e){if(function(t){return t.startsWith("//")}(e)){const t=o("http:"+e);return t.scheme="",t.type=n.SchemeRelative,t}if(r(e)){const t=o("http://foo.com"+e);return t.scheme="",t.host="",t.type=n.AbsolutePath,t}if(function(t){return t.startsWith("file:")}(e))return function(t){const e=s.exec(t),n=e[2];return u("file:","",e[1]||"","",r(n)?n:"/"+n,e[3]||"",e[4]||"")}(e);if(function(e){return t.test(e)}(e))return o(e);const h=o("http://foo.com/"+e);return h.scheme="",h.host="",h.type=e?e.startsWith("?")?n.Query:e.startsWith("#")?n.Hash:n.RelativePath:n.Empty,h}function c(t,e){const s=e<=n.RelativePath,r=t.path.split("/");let h=1,o=0,u=!1;for(let t=1;t<r.length;t++){const e=r[t];e?(u=!1,"."!==e&&(".."!==e?(r[h++]=e,o++):o?(u=!0,o--,h--):s&&(r[h++]=e))):u=!0}let a="";for(let t=1;t<h;t++)a+="/"+r[t];(!a||u&&!a.endsWith("/.."))&&(a+="/"),t.path=a}return function(t){t[t.Empty=1]="Empty",t[t.Hash=2]="Hash",t[t.Query=3]="Query",t[t.RelativePath=4]="RelativePath",t[t.AbsolutePath=5]="AbsolutePath",t[t.SchemeRelative=6]="SchemeRelative",t[t.Absolute=7]="Absolute"}(n||(n={})),function(t,e){if(!t&&!e)return"";const s=a(t);let r=s.type;if(e&&r!==n.Absolute){const t=a(e),h=t.type;switch(r){case n.Empty:s.hash=t.hash;case n.Hash:s.query=t.query;case n.Query:case n.RelativePath:!function(t,e){c(e,e.type),"/"===t.path?t.path=e.path:t.path=function(t){if(t.endsWith("/.."))return t;const e=t.lastIndexOf("/");return t.slice(0,e+1)}(e.path)+t.path}(s,t);case n.AbsolutePath:s.user=t.user,s.host=t.host,s.port=t.port;case n.SchemeRelative:s.scheme=t.scheme}h>r&&(r=h)}c(s,r);const o=s.query+s.hash;switch(r){case n.Hash:case n.Query:return o;case n.RelativePath:{const n=s.path.slice(1);return n?h(e||t)&&!h(n)?"./"+n+o:n+o:o||"."}case n.AbsolutePath:return s.path+o;default:return s.scheme+"//"+s.user+s.host+s.port+s.path+o}}}));